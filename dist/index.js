var NodeParser=function(){"use strict";var m=Object.defineProperty;var N=(l,r,c)=>r in l?m(l,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[r]=c;var g=(l,r,c)=>N(l,typeof r!="symbol"?r+"":r,c);const l=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","path","circle","ellipse","line","rect","use","stop","polygon","polyline"]),r=d=>/^[a-zA-Z_][a-zA-Z_0-9]+$/.test(d)?d:`"${d}"`;class c{constructor(){g(this,"tags",new Set);g(this,"components",new Set);g(this,"root",{nodeName:"#document",attributes:{},children:[]});g(this,"stack",[this.root]);g(this,"currentNode",this.root)}parseFromString(o){const e=this.tokenize(o);return this.parseTokens(e),{root:this.root,components:Array.from(this.components),tags:Array.from(this.tags)}}tokenize(o){const e=[];let t="",a=!1,i=!1,u=34;for(let s=0;s<o.length;s++){const n=o.charCodeAt(s);if(a&&(n===34||n===39)){i?n===u&&(i=!1):(i=!0,u=n),t+=String.fromCharCode(n);continue}if(n===60&&!i){const h=t.trim(),f=this.getTagName(h),p=l.has(f);h&&e.push({type:"text",value:h,isSelfClosing:p}),t="",a=!0}else if(n===62&&!i){if(t){const h=t.endsWith("/");h&&(t=t.slice(0,-1)),e.push({type:"tag",value:t.trim(),isSelfClosing:h})}t="",a=!1}else t+=String.fromCharCode(n)}return t.trim()&&e.push({type:"text",value:t.trim(),isSelfClosing:!1}),e}parseTokens(o){this.root={nodeName:"#document",attributes:{},children:[]},this.stack=[this.root],this.currentNode=this.root;for(const e of o){let t=this.getTagName(e.value);const a=e.value.startsWith("/"),i=e.isSelfClosing;if(t=a?e.value.slice(1):this.getTagName(e.value),e.type==="tag")if(t=t.replace(/\/$/,""),t[0].toUpperCase()===t[0]||t.includes("-")?this.components.add(t):this.tags.add(t),a)this.stack.pop(),this.stack.length>0&&(this.currentNode=this.stack[this.stack.length-1]);else{const s={tagName:t,nodeName:t.toUpperCase(),attributes:i?{}:this.getAttributes(e.value),isSelfClosing:i,children:[]};i?this.currentNode.children.push(s):(this.currentNode.children.push(s),this.stack.push(s),this.currentNode=s)}else if(e.type==="text"){const u={nodeName:"#text",attributes:{},children:[],value:e.value};this.currentNode.children.push(u)}}}getTagName(o){return o.split(/[\s/>]/)[0]}getAttributes(o){const e={},t=/([^\s=]+)(?:=(?:"([^"]*)"|'([^']*)'|([^\s"']+)))?/g,a=o.split(/\s+/);if(a.length<2)return e;const i=o.slice(a[0].length);let u;for(;(u=t.exec(i))!==null;){const[,s,n,h,f]=u;s&&s!=="/"&&(e[s]=n||h||f||"")}return e}}return g(c,"selfClosingTags",l),g(c,"quoteText",r),c}();
//# sourceMappingURL=index.js.map
