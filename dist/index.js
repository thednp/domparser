var Parser=function(f){"use strict";const y=t=>t.toLowerCase(),b=t=>t.toUpperCase(),v=(t,s)=>t.startsWith(s),w=(t,s)=>t.endsWith(s),h=(t,s)=>t.charCodeAt(s),g=t=>t.replace(/[&<>"']/g,s=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[s]||s),A=t=>{const s=decodeURIComponent(t.trim());return/^(?:javascript|data|vbscript):/i.test(s)?"":g(s)},k=(t,s)=>{if(!s)return"";const c=s.trim();return t==="src"||t==="href"||t==="action"||t==="formaction"||w(t,"url")?A(c):g(c)},N=(t,s=new Set)=>{const c={},m=t.split(/\s+/);if(m.length<2)return c;const T=t.slice(m[0].length);let r;const o=/([^\s=]+)(?:=(?:"([^"]*)"|'([^']*)'|([^\s"']+)))?/g;for(;r=o.exec(T);){const[,e,l,a,u]=r;e&&e!=="/"&&!s.has(y(e))&&(c[e]=k(y(e),l??a??u??""))}return c},P={nodeName:"#document",children:[]};function W(t={}){const s=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","path","circle","ellipse","line","rect","use","stop","polygon","polyline"]),c=new Set,m=new Set;if(t){const{filterTags:r,filterAttrs:o}=t;r&&r.forEach(e=>c.add(e)),o&&o.forEach(e=>m.add(e))}const T=r=>{const o=[];let e="",l=!1,a=!1,u=0,p=!1;for(let i=0;i<r.length;i++){const n=h(r,i);if(p){e+=String.fromCharCode(n),w(e,"--")&&h(r,i+1)===62&&(o.push({nodeType:"comment",value:e.trim(),isSC:!1}),e="",p=!1,i++);continue}if(l&&(n===34||n===39)){a?n===u&&(a=!1):(u=n,a=!0),e+=String.fromCharCode(n);continue}if(n===60&&!a){if(e.trim()&&o.push({nodeType:"text",value:g(e.trim()),isSC:!1}),e="",l=!0,h(r,i+1)===33&&h(r,i+2)===45&&h(r,i+3)===45){p=!0,e+="!--",i+=3;continue}}else if(n===62&&!a&&l&&!p){if(e){const S=w(e,"/"),C=v(e,"!doctype");o.push({nodeType:C?"doctype":"tag",value:S?e.slice(0,-1).trim():e.trim(),isSC:S})}e="",l=!1}else e+=String.fromCharCode(n)}return e.trim()&&o.push({nodeType:"text",value:g(e.trim()),isSC:!1}),o};return{parseFromString(r){const o={...P,children:[]};if(!r)return{root:o,components:[],tags:[]};const e=[o],l=new Set,a=new Set;let u=!0;return T(r).forEach(p=>{const{nodeType:i,value:n,isSC:S}=p;if(i==="doctype")return;if(["text","comment"].includes(i)){e[e.length-1].children.push({nodeName:`#${i}`,nodeValue:i==="text"?n:`<${n}>`});return}const C=v(n,"/"),d=C?n.slice(1):n.split(/[\s/>]/)[0],z=y(d),E=S||s.has(z);if(c.has(z)){C?u=!0:u=!1;return}if(u)if((d[0]===b(d[0])||d.includes("-")?l:a).add(d),C)!E&&e.length>1&&e.pop();else{const U={tagName:d,nodeName:b(d),attributes:N(n,m),children:[]};e[e.length-1].children.push(U),!E&&e.push(U)}}),{root:o,components:Array.from(l),tags:Array.from(a)}}}}return f.Parser=W,f.encodeEntities=g,f.getAttributes=N,f.sanitizeAttrValue=k,f.sanitizeUrl=A,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),f}({});
//# sourceMappingURL=index.js.map
