var Parser=function(u){"use strict";const m=e=>e.toLowerCase(),w=e=>e.toUpperCase(),E=(e,s)=>e.startsWith(s),b=(e,s)=>e.endsWith(s),h=e=>e.replace(/[&<>"']/g,s=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[s]||s),y=e=>{const s=decodeURIComponent(e.trim());return/^(?:javascript|data|vbscript):/i.test(s)?"":h(s)},v=(e,s)=>{if(!s)return"";const a=s.trim();return e==="src"||e==="href"||e==="action"||e==="formaction"||b(e,"url")?y(a):h(a)},A=(e,s=new Set)=>{const a={},p=e.split(/\s+/);if(p.length<2)return a;const C=e.slice(p[0].length);let o;const r=/([^\s=]+)(?:=(?:"([^"]*)"|'([^']*)'|([^\s"']+)))?/g;for(;o=r.exec(C);){const[,t,c,i,l]=o;t&&t!=="/"&&!s.has(m(t))&&(a[t]=v(m(t),c??i??l??""))}return a},T={nodeName:"#document",children:[]};function U(e={}){const s=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","path","circle","ellipse","line","rect","use","stop","polygon","polyline"]),a=new Set,p=new Set;if(e){const{filterTags:o,filterAttrs:r}=e;o&&o.forEach(t=>a.add(t)),r&&r.forEach(t=>p.add(t))}const C=o=>{const r=[];let t="",c=!1,i=!1,l=0;for(let d=0;d<o.length;d++){const n=o.charCodeAt(d);if(c&&(n===34||n===39)){i?n===l&&(i=!1):(l=n,i=!0),t+=String.fromCharCode(n);continue}if(n===60&&!i)t.trim()&&r.push({type:"text",value:h(t.trim()),isSC:!1}),t="",c=!0;else if(n===62&&!i){if(t){const g=b(t,"/");r.push({type:"tag",value:g?t.slice(0,-1).trim():t.trim(),isSC:g})}t="",c=!1}else t+=String.fromCharCode(n)}return t.trim()&&r.push({type:"text",value:h(t.trim()),isSC:!1}),r};return{parseFromString(o){const r={...T,children:[]};if(!o)return{root:r,components:[],tags:[]};const t=[r],c=new Set,i=new Set;let l=!0;return C(o).forEach(d=>{const{value:n,isSC:g}=d;if(d.type==="text"){t[t.length-1].children.push({nodeName:"#text",value:n});return}const S=E(n,"/"),f=S?n.slice(1):n.split(/[\s/>]/)[0],N=m(f),k=g||s.has(N);if(a.has(N)){S?l=!0:l=!1;return}if(l)if((f[0]===w(f[0])||f.includes("-")?c:i).add(f),S)!k&&t.length>1&&t.pop();else{const z={tagName:f,nodeName:w(f),attributes:A(n,p),children:[]};t[t.length-1].children.push(z),!k&&t.push(z)}}),{root:r,components:Array.from(c),tags:Array.from(i)}}}}return u.Parser=U,u.encodeEntities=h,u.getAttributes=A,u.sanitizeAttrValue=v,u.sanitizeUrl=y,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),u}({});
//# sourceMappingURL=index.js.map
