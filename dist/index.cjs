"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const y=t=>t.toLowerCase(),v=t=>t.toUpperCase(),k=(t,s)=>t.startsWith(s),w=(t,s)=>t.endsWith(s),g=(t,s)=>t.charCodeAt(s),m=t=>t.replace(/[&<>"']/g,s=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[s]||s),x=t=>{const s=decodeURIComponent(t.trim());return/^(?:javascript|data|vbscript):/i.test(s)?"":m(s)},N=(t,s)=>{if(!s)return"";const c=s.trim();return t==="src"||t==="href"||t==="action"||t==="formaction"||w(t,"url")?x(c):m(c)},z=(t,s=new Set)=>{const c={},p=t.split(/\s+/);if(p.length<2)return c;const S=t.slice(p[0].length);let r;const o=/([^\s=]+)(?:=(?:"([^"]*)"|'([^']*)'|([^\s"']+)))?/g;for(;r=o.exec(S);){const[,e,l,a,u]=r;e&&e!=="/"&&!s.has(y(e))&&(c[e]=N(y(e),l??a??u??""))}return c},E={nodeName:"#document",children:[]};function U(t={}){const s=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","path","circle","ellipse","line","rect","use","stop","polygon","polyline"]),c=new Set,p=new Set;if(t){const{filterTags:r,filterAttrs:o}=t;r&&r.forEach(e=>c.add(e)),o&&o.forEach(e=>p.add(e))}const S=r=>{const o=[];let e="",l=!1,a=!1,u=0,d=!1;for(let i=0;i<r.length;i++){const n=g(r,i);if(d){e+=String.fromCharCode(n),w(e,"--")&&g(r,i+1)===62&&(o.push({nodeType:"comment",value:e.trim(),isSC:!1}),e="",d=!1,i++);continue}if(l&&(n===34||n===39)){a?n===u&&(a=!1):(u=n,a=!0),e+=String.fromCharCode(n);continue}if(n===60&&!a){if(e.trim()&&o.push({nodeType:"text",value:m(e.trim()),isSC:!1}),e="",l=!0,g(r,i+1)===33&&g(r,i+2)===45&&g(r,i+3)===45){d=!0,e+="!--",i+=3;continue}}else if(n===62&&!a&&l&&!d){if(e){const C=w(e,"/"),h=k(e,"!doctype");o.push({nodeType:h?"doctype":"tag",value:C?e.slice(0,-1).trim():e.trim(),isSC:C})}e="",l=!1}else e+=String.fromCharCode(n)}return e.trim()&&o.push({nodeType:"text",value:m(e.trim()),isSC:!1}),o};return{parseFromString(r){const o={...E,children:[]};if(!r)return{root:o,components:[],tags:[]};const e=[o],l=new Set,a=new Set;let u=!0;return S(r).forEach(d=>{const{nodeType:i,value:n,isSC:C}=d;if(i==="doctype")return;if(["text","comment"].includes(i)){e[e.length-1].children.push({nodeName:`#${i}`,nodeValue:i==="text"?n:`<${n}>`});return}const h=k(n,"/"),f=h?n.slice(1):n.split(/[\s/>]/)[0],T=y(f),b=C||s.has(T);if(c.has(T)){h?u=!0:u=!1;return}if(u)if((f[0]===v(f[0])||f.includes("-")?l:a).add(f),h)!b&&e.length>1&&e.pop();else{const A={tagName:f,nodeName:v(f),attributes:z(n,p),children:[]};e[e.length-1].children.push(A),!b&&e.push(A)}}),{root:o,components:Array.from(l),tags:Array.from(a)}}}}exports.Parser=U;exports.encodeEntities=m;exports.getAttributes=z;exports.sanitizeAttrValue=N;exports.sanitizeUrl=x;
//# sourceMappingURL=index.cjs.map
